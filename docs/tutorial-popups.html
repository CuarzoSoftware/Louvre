<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Louvre: Chapter 11: Popups</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Louvre<span id="projectnumber">&#160;v2.18.1-1</span>
   </div>
   <div id="projectbrief">C++ library for Wayland compositors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Chapter 11: Popups</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Popup surfaces are short-lived surfaces typically employed for displaying tooltips or context menus. They are always children of a toplevel or other popups.</p>
<center> <img src="https://lh3.googleusercontent.com/6caGayutKKWqndpd6ogno2lPw8XGELxnFums4gvkWZKOJYO0762yVG3mHLrc1rw63r1eEJabEdW9F5AA2BDTFCtpB_hiPlTY4FkKlHfH1B-2MdLvXCD6RuwZOZvhOl6EhydtsOYGPw=w2400" alt="" style="width:35vw" class="inline"/> </center><h2><a class="anchor" id="window-geometry"></a>
Window Geometry</h2>
<p>Similar to toplevels, the size of a popup is not determined by its surface size but by its window geometry (accessible through <a class="el" href="class_louvre_1_1_l_popup_role.html#ad1e743fb0701cd487e363cc3609f3ac3" title="Window geometry in surface coordinates.">Louvre::LPopupRole::windowGeometry()</a>). The window geometry defines the rectangular area within the surface that represents the actual popup window, excluding any decorative elements like shadows. This is the size you should consider when configuring a popup.</p>
<center> <img src="https://lh3.googleusercontent.com/pw/AIL4fc9WuCZOWGGC6v7ZepWA7VOWygycmNFEngEHX7J9ODdmzm1Qs4au1KYPMRJ_102tfvOXFBcL-Kwghm0bSKbd4U6der3p94l1drpn3ONqb9yfv-uFgHQ=w2400" alt="" style="max-width:25vw;min-width:400px" class="inline"/> </center><h2><a class="anchor" id="positioning"></a>
Positioning</h2>
<p>Popups involve complex rules for their positioning relative to their parent surface. These rules dictate how popups should be repositioned or scaled when their geometries extend beyond a specified bounding rect, such as an output.</p>
<p>All these positioning rules are defined in their <a class="el" href="class_louvre_1_1_l_positioner.html" title="Positioning rules for LPopupRole surfaces.">Louvre::LPositioner</a> instance which can be accessed through <a class="el" href="class_louvre_1_1_l_popup_role.html#ab002e5185e9e97e8b8f2bb3bee26ed06" title="Gets the positioning rules for the popup.">Louvre::LPopupRole::positioner()</a>. If you wish to understand how these work, please refer to the <a class="el" href="class_louvre_1_1_l_positioner.html" title="Positioning rules for LPopupRole surfaces.">Louvre::LPositioner</a> documentation.</p>
<p>Fortunately, <a class="el" href="namespace_louvre.html" title="Namespaces.">Louvre</a> simplifies this, implementing these rules by default in <a class="el" href="class_louvre_1_1_l_popup_role.html#ae643327b7ea1cbe75deb88417651e5e1" title="Position of the popup surface according to the role.">Louvre::LPopupRole::rolePos()</a>. This leaves you with the straightforward task of defining the bounding area where the popup should be positioned. In our case, we should set the bounding area equal to the current output size minus the topbar region, or equal to the entire output size if the popup is a child of a fullscreen toplevel.</p>
<p>Let's explore how to handle this by creating our custom <a class="el" href="class_louvre_1_1_l_popup_role.html" title="Popup role for surfaces.">Louvre::LPopupRole</a> subclass called <code>EPopup</code>.</p>
<h3><a class="anchor" id="srcepopuph"></a>
src/EPopup.h</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef EPOPUP_H</span></div>
<div class="line"><span class="preprocessor">#define EPOPUP_H</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;LPopupRole.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_louvre.html">Louvre</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ESurface;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>EPopup : <span class="keyword">public</span> <a class="code hl_class" href="class_louvre_1_1_l_popup_role.html">LPopupRole</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    EPopup(<span class="keyword">const</span> <span class="keywordtype">void</span> *params);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Cast LSurface to ESurface</span></div>
<div class="line">    <span class="keyword">inline</span> ESurface *surf()<span class="keyword"> const</span></div>
<div class="line"><span class="keyword">    </span>{</div>
<div class="line">        <span class="keywordflow">return</span> (ESurface*) surface();</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">void</span> configureRequest() <span class="keyword">override</span>;</div>
<div class="line">    <span class="keywordtype">void</span> grabSeatRequest(Protocols::Wayland::GSeat *seatGlobal) <span class="keyword">override</span>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">// EPOPUP_H</span></div>
<div class="ttc" id="aclass_louvre_1_1_l_popup_role_html"><div class="ttname"><a href="class_louvre_1_1_l_popup_role.html">Louvre::LPopupRole</a></div><div class="ttdoc">Popup role for surfaces.</div><div class="ttdef"><b>Definition</b> LPopupRole.h:21</div></div>
<div class="ttc" id="anamespace_louvre_html"><div class="ttname"><a href="namespace_louvre.html">Louvre</a></div><div class="ttdoc">Namespaces.</div><div class="ttdef"><b>Definition</b> LBox.h:7</div></div>
</div><!-- fragment --><h3><a class="anchor" id="srcepopupcpp"></a>
src/EPopup.cpp</h3>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;protocols/Wayland/GSeat.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;LSeat.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;LKeyboard.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;LCursor.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;LPositioner.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;LOutput.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ECompositor.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ESurface.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;EPopup.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;Global.h&quot;</span></div>
<div class="line"> </div>
<div class="line">EPopup::EPopup(<span class="keyword">const</span> <span class="keywordtype">void</span> *params) : <a class="code hl_class" href="class_louvre_1_1_l_popup_role.html">LPopupRole</a>(params) {}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> EPopup::configureRequest()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// A bounding rect with zero area disable constraints</span></div>
<div class="line">    <a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a> boundingRect { 0 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The cursor is always positioned within an output unless there are zero initialized outputs</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespace_louvre.html#a0ebe6057a764ac1de2b90e50c6a7916c">cursor</a>()-&gt;output())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Ensure the Popup stays within the boundaries of the current output where the cursor is positioned</span></div>
<div class="line">        boundingRect = <a class="code hl_function" href="namespace_louvre.html#a0ebe6057a764ac1de2b90e50c6a7916c">cursor</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_cursor.html#a78cead834241e232298bef395516b2ee">output</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_output.html#a315aa6ec38b7660b6e56b8591199172b">rect</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If the popup is child of a fullscreen toplevel we can ignore the topbar area</span></div>
<div class="line">        <span class="keywordflow">if</span> (surf()-&gt;view.parent() == &amp;G::compositor()-&gt;surfacesLayer)</div>
<div class="line">            boundingRect += <a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a>(0, TOPBAR_HEIGHT, 0, -TOPBAR_HEIGHT);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    setPositionerBounds(boundingRect);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Calculate the relative position of the Popup with respect to its parent position,</span></div>
<div class="line"><span class="comment">     * calling rolePos() also determines LPositioner::unconstrainedSize() */</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_class" href="class_louvre_1_1_l_point_template.html">LPoint</a> localParentPos { rolePos() - surface()-&gt;parent()-&gt;pos() };</div>
<div class="line">    configure(<a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a>(localParentPos, positioner().unconstrainedSize()));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> EPopup::grabSeatRequest(Protocols::Wayland::GSeat *seatGlobal)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* The grabSeatRequest() is only triggered if the request has been</span></div>
<div class="line"><span class="comment">     * originated from some client event, such as a pointer click or key press*/</span></div>
<div class="line">    <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;setGrabbingSurface(surface(), seatGlobal-&gt;keyboardResource());</div>
<div class="line">}</div>
<div class="ttc" id="aclass_louvre_1_1_l_cursor_html_a78cead834241e232298bef395516b2ee"><div class="ttname"><a href="class_louvre_1_1_l_cursor.html#a78cead834241e232298bef395516b2ee">Louvre::LCursor::output</a></div><div class="ttdeci">LOutput * output() const noexcept</div><div class="ttdoc">Gets the current cursor output.</div><div class="ttdef"><b>Definition</b> LCursor.cpp:350</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_output_html_a315aa6ec38b7660b6e56b8591199172b"><div class="ttname"><a href="class_louvre_1_1_l_output.html#a315aa6ec38b7660b6e56b8591199172b">Louvre::LOutput::rect</a></div><div class="ttdeci">const LRect &amp; rect() const noexcept</div><div class="ttdoc">Gets the output rect.</div><div class="ttdef"><b>Definition</b> LOutput.cpp:457</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_point_template_html"><div class="ttname"><a href="class_louvre_1_1_l_point_template.html">Louvre::LPointTemplate&lt; Int32 &gt;</a></div></div>
<div class="ttc" id="aclass_louvre_1_1_l_rect_template_html"><div class="ttname"><a href="class_louvre_1_1_l_rect_template.html">Louvre::LRectTemplate&lt; Int32 &gt;</a></div></div>
<div class="ttc" id="aclass_louvre_1_1_l_seat_html_ac4ab7f9428e61a97051fce844a98cc21"><div class="ttname"><a href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">Louvre::LSeat::keyboard</a></div><div class="ttdeci">LKeyboard * keyboard() const noexcept</div><div class="ttdoc">Access to keyboard events.</div><div class="ttdef"><b>Definition</b> LSeat.h:179</div></div>
<div class="ttc" id="anamespace_louvre_html_a0ebe6057a764ac1de2b90e50c6a7916c"><div class="ttname"><a href="namespace_louvre.html#a0ebe6057a764ac1de2b90e50c6a7916c">Louvre::cursor</a></div><div class="ttdeci">LCursor * cursor() noexcept</div><div class="ttdoc">Gets the compositor's cursor.</div><div class="ttdef"><b>Definition</b> LCompositor.cpp:47</div></div>
<div class="ttc" id="anamespace_louvre_html_acee23df69aa55d791385fb9813b0319a"><div class="ttname"><a href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">Louvre::seat</a></div><div class="ttdeci">LSeat * seat() noexcept</div><div class="ttdoc">Gets the compositor's seat.</div><div class="ttdef"><b>Definition</b> LCompositor.cpp:42</div></div>
</div><!-- fragment --><p>I'll explain what's happening in a moment, but first, let's override its virtual constructor.</p>
<h3><a class="anchor" id="srcecompositorh-5"></a>
src/ECompositor.h</h3>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ECompositor : <span class="keyword">public</span> <a class="code hl_class" href="class_louvre_1_1_l_compositor.html">LCompositor</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="class_louvre_1_1_l_popup_role.html">LPopupRole</a> *createPopupRoleRequest(<span class="keyword">const</span> <span class="keywordtype">void</span> *params) <span class="keyword">override</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">};</div>
<div class="ttc" id="aclass_louvre_1_1_l_compositor_html"><div class="ttname"><a href="class_louvre_1_1_l_compositor.html">Louvre::LCompositor</a></div><div class="ttdoc">Louvre's core and objects factory.</div><div class="ttdef"><b>Definition</b> LCompositor.h:24</div></div>
</div><!-- fragment --><h3><a class="anchor" id="srcecompositorcpp-6"></a>
src/ECompositor.cpp</h3>
<div class="fragment"><div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;EPopup.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"> </div>
<div class="line"><a class="code hl_class" href="class_louvre_1_1_l_popup_role.html">LPopupRole</a> *ECompositor::createPopupRoleRequest(<span class="keyword">const</span> <span class="keywordtype">void</span> *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> EPopup(params);</div>
<div class="line">}</div>
</div><!-- fragment --><p> Similar to what we saw with toplevels, popups also request to be configured the first time they are created, accomplished through <a class="el" href="class_louvre_1_1_l_popup_role.html#a884870ee0060d30d75795ddf9e8c521d" title="Handles client requests for configuring the popup.">Louvre::LPopupRole::configureRequest()</a>.</p>
<p>We configure popups using Louvre::LPopupRole::configure(). However, unlike toplevels, popups don't have state flags, but they do require configuration of both their position relative to the parent surface and their size.</p>
<h3><a class="anchor" id="srcepopupcpp-1"></a>
src/EPopup.cpp</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> EPopup::configureRequest()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// If the bounding rect has zero area, constraints are disabled</span></div>
<div class="line">    <a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a> boundingRect { 0 };</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// The cursor is always positioned within an output unless there are zero initialized outputs</span></div>
<div class="line">    <span class="keywordflow">if</span> (cursor()-&gt;output())</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Ensure the popup stays within the boundaries of the current output where the cursor is positioned</span></div>
<div class="line">        boundingRect = cursor()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_cursor.html#a78cead834241e232298bef395516b2ee">output</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_output.html#a315aa6ec38b7660b6e56b8591199172b">rect</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// If the popup is a child of a fullscreen toplevel, we can ignore the top bar area</span></div>
<div class="line">        <span class="keywordflow">if</span> (surf()-&gt;view.parent() == &amp;G::compositor()-&gt;surfacesLayer)</div>
<div class="line">            boundingRect += <a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a>(0, TOPBAR_HEIGHT, 0, -TOPBAR_HEIGHT);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    setPositionerBounds(boundingRect);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Calculate the relative position of the Popup with respect to its parent position,</span></div>
<div class="line"><span class="comment">     * calling rolePos() also determines LPositioner::unconstrainedSize() */</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_class" href="class_louvre_1_1_l_point_template.html">LPoint</a> localParentPos { rolePos() - surface()-&gt;parent()-&gt;pos() };</div>
<div class="line">    configure(<a class="code hl_class" href="class_louvre_1_1_l_rect_template.html">LRect</a>(localParentPos, positioner().unconstrainedSize()));</div>
<div class="line">}</div>
</div><!-- fragment --><p>So, within <a class="el" href="class_louvre_1_1_l_popup_role.html#a884870ee0060d30d75795ddf9e8c521d" title="Handles client requests for configuring the popup.">Louvre::LPopupRole::configureRequest()</a>, we begin by defining the boundaries within which the popup can be positioned. If it's a child of a fullscreen toplevel, we set the bounding rect equal to the output rect, otherwise, we subtract the topbar region. To determine the position, we call <a class="el" href="class_louvre_1_1_l_popup_role.html#ae643327b7ea1cbe75deb88417651e5e1" title="Position of the popup surface according to the role.">Louvre::LPopupRole::rolePos()</a> which returns the popup global position and then we subtract its parent's position to calculate the local parent offset.</p>
<p>Moreover, calling <a class="el" href="class_louvre_1_1_l_popup_role.html#ae643327b7ea1cbe75deb88417651e5e1" title="Position of the popup surface according to the role.">Louvre::LPopupRole::rolePos()</a> also stores the size the popup should have to remain unconstrained (in case it is constrained), which can be accessed with Louvre::LPositioner::unconstrainedSize().</p>
<p>Finally, we configure the popup using the calculated local parent position and unconstrained size.</p>
<h2><a class="anchor" id="explicit-grab"></a>
Explicit Grab</h2>
<p>Popups can also request to be created with an explicit keyboard grab through Louvre::LPopupRole::grabSeatRequest(). This means that all keyboard events should be redirected to that surface while it is active. If the popup is dismissed, the grab should be returned to the parent surface (if it is also a popup previously created with a keyboard grab).</p>
<blockquote class="doxtable">
<p>&zwj;This request is only triggered if it originated from a keyboard or pointer event. If you deny the grab, the popup will be automatically dismissed. </p>
</blockquote>
<h3><a class="anchor" id="srcepopupcpp-2"></a>
src/EPopup.cpp</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> EPopup::grabSeatRequest(Protocols::Wayland::GSeat *seatGlobal)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">/* The grabSeatRequest() is only triggered if the request has been</span></div>
<div class="line"><span class="comment">     * originated from some client event, such as a pointer click or key press*/</span></div>
<div class="line">    seat()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;setGrabbingSurface(surface(), seatGlobal-&gt;keyboardResource());</div>
<div class="line">}</div>
</div><!-- fragment --><p>The <a class="el" href="class_louvre_1_1_l_keyboard.html" title="Class for handling keyboard events.">Louvre::LKeyboard</a> class includes a utility method for setting a keyboard grab on a surface (Louvre::LKeyboard::setGrabbingSurface()). During a keyboard grab, no other surface can acquire keyboard focus, rendering <a class="el" href="class_louvre_1_1_l_keyboard.html#ab600af38a7a8579ddcaf35c4b2efee49" title="Set keyboard focus.">Louvre::LKeyboard::setFocus()</a> a no-op.</p>
<p>The Louvre::LKeyboard::setGrabbingSurface() method accepts two arguments: the target surface that will receive the keyboard grab and the native <a href="https://wayland.app/protocols/wayland#wl_keyboard">wl_keyboard</a> resource used by the client (clients can bind multiple times to the <a href="https://wayland.app/protocols/wayland#wl_seat">wl_seat</a> global, and create more than one <a href="https://wayland.app/protocols/wayland#wl_keyboard">wl_keyboard</a> resource).</p>
<blockquote class="doxtable">
<p>&zwj;Classes located in <code>&lt;protocols/...&gt;</code>, such as <code>&lt;protocols/Wayland/GSeat.h&gt;</code>, represent low-level Wayland interfaces/resources of protocols implemented by <a class="el" href="namespace_louvre.html" title="Namespaces.">Louvre</a>. While they can be used for sending or handling low-level Wayland events/requests, it's not recommended, as doing so could potentially disrupt the higher-level functioning of <a class="el" href="namespace_louvre.html" title="Namespaces.">Louvre</a>. </p>
</blockquote>
<h2><a class="anchor" id="dismissing-popups"></a>
Dismissing Popups</h2>
<p>As you may recall from previous chapters, we dismissed all popups, for example when clicking on a surface that is not a popup or when no surface is clicked, using Louvre::LPointer::dismissPopups(). To dismiss a specific popup, you can use <a class="el" href="class_louvre_1_1_l_popup_role.html#a8072918706597dbfb82d550131c9fbd8" title="Dismiss the popup.">Louvre::LPopupRole::dismiss()</a>. This method will dismiss the specified popup along with any child or subchild popups, in reverse order of their creation.</p>
<blockquote class="doxtable">
<p>&zwj;We have briefly discussed other surface roles like <a class="el" href="class_louvre_1_1_l_subsurface_role.html" title="Subsurface role for surfaces.">Louvre::LSubsurfaceRole</a>, <a class="el" href="class_louvre_1_1_l_cursor_role.html" title="Cursor role for surfaces.">Louvre::LCursorRole</a>, and <a class="el" href="class_louvre_1_1_l_d_n_d_icon_role.html" title="Drag &amp; drop icon role for surfaces.">Louvre::LDNDIconRole</a>. However, we won't go into extensive detail about these because there is limited practical value in subclassing them and overriding their virtual methods. The functionality they provide is already efficiently handled by the classes we've explored so far and the ones that will be covered in the upcoming chapters. </p>
</blockquote>
<p>In the next chapter, we will delve into creating animations using the <a class="el" href="class_louvre_1_1_l_animation.html" title="Time-based animations.">Louvre::LAnimation</a> class. Until then, happy coding!</p>
<p><a href="10.md">◀ Chapter 10: Toplevels</a> || <a href="12.md">Chapter 12: Animations ▶</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<script>
    var menu = false;
    var burger, nav;
    function resp()
    {
        if (window.innerWidth < 768)
        {
            burger.hidden = false;
            nav.hidden = true;
        }
        else
        {
            burger.hidden = true;
            nav.hidden = false;
        }
        menu = false;
    }
    function toggleMenu()
    {
        nav.hidden = menu;
        menu = !menu;
    }
    window.onload = function()
    {
        if (typeof toggleLevel !== "undefined")
            toggleLevel(2);
        // Get all <a> tags with the "el" class
        var elLinks = document.querySelectorAll('a.el');
        // Loop through the matched elements
        elLinks.forEach(function(link) 
        {
            // Replace "Louvre::" with an empty string in the text content
            link.textContent = link.textContent.replace(/Louvre::/g, '');
        });
        nav = document.getElementById('main-nav');
        burger = document.createElement('div');
        burger.style.position = 'absolute';
        burger.style.top = '14px';
        burger.style.right = burger.style.top;
        burger.innerHTML = '<svg onclick="toggleMenu()" height="32px" viewBox="0 0 448 512"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>';
        document.getElementById('top').appendChild(burger);
        resp();
    };
    window.onresize = function()
    {
        resp();
    };
</script>
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">Project developed by <a href="https://github.com/CuarzoSoftware"><img class="footer" src="https://avatars.githubusercontent.com/u/29326763?s=200&v=4" style="margin-left:2px;position:relative;top:-1px;width:12px;height:12px" alt="cuarzo"/> Cuarzo Software</a></li>
    </ul>
</div>