<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Louvre: LActivationTokenManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Louvre<span id="projectnumber">&#160;v2.18.1-1</span>
   </div>
   <div id="projectbrief">C++ library for Wayland compositors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_louvre.html">Louvre</a></li><li class="navelem"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html">LActivationTokenManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_louvre_1_1_l_activation_token_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">LActivationTokenManager Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Activation Token Manager.  
 <a href="class_louvre_1_1_l_activation_token_manager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_l_activation_token_manager_8h_source.html">LActivationTokenManager.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for LActivationTokenManager:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="class_louvre_1_1_l_activation_token_manager.png" usemap="#LActivationTokenManager_map" alt=""/>
  <map id="LActivationTokenManager_map" name="LActivationTokenManager_map">
<area href="class_louvre_1_1_l_factory_object.html" title="Base class for Factory objects." alt="LFactoryObject" shape="rect" coords="0,56,160,80"/>
<area href="class_louvre_1_1_l_object.html" title="Base class for Louvre objects." alt="LObject" shape="rect" coords="0,0,160,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0672a06e173efe84390afb4db4c19330" id="r_a0672a06e173efe84390afb4db4c19330"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a0672a06e173efe84390afb4db4c19330">LActivationTokenManager</a> (const void *params) noexcept</td></tr>
<tr class="memdesc:a0672a06e173efe84390afb4db4c19330"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html" title="Activation Token Manager.">LActivationTokenManager</a> class constructor.  <br /></td></tr>
<tr class="separator:a0672a06e173efe84390afb4db4c19330"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac398aa00f66d73778a15338ed7a95a13" id="r_ac398aa00f66d73778a15338ed7a95a13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#ac398aa00f66d73778a15338ed7a95a13">~LActivationTokenManager</a> () noexcept</td></tr>
<tr class="memdesc:ac398aa00f66d73778a15338ed7a95a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor of the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html" title="Activation Token Manager.">LActivationTokenManager</a> class.  <br /></td></tr>
<tr class="separator:ac398aa00f66d73778a15338ed7a95a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc725cf49baea7e93f7abf73b62b0694" id="r_afc725cf49baea7e93f7abf73b62b0694"><td class="memItemLeft" align="right" valign="top">const std::unordered_map&lt; std::string, <a class="el" href="class_louvre_1_1_l_activation_token.html">LActivationToken</a> * &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#afc725cf49baea7e93f7abf73b62b0694">tokens</a> () const noexcept</td></tr>
<tr class="memdesc:afc725cf49baea7e93f7abf73b62b0694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve available tokens.  <br /></td></tr>
<tr class="separator:afc725cf49baea7e93f7abf73b62b0694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cb010bd260fbefa7dc0268b3dea8245" id="r_a3cb010bd260fbefa7dc0268b3dea8245"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_louvre_1_1_l_activation_token.html">LActivationToken</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a> () const noexcept</td></tr>
<tr class="memdesc:a3cb010bd260fbefa7dc0268b3dea8245"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the current token.  <br /></td></tr>
<tr class="separator:a3cb010bd260fbefa7dc0268b3dea8245"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb0c19c59eaf96dcf3aab77231d0f0b" id="r_a0bb0c19c59eaf96dcf3aab77231d0f0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a0bb0c19c59eaf96dcf3aab77231d0f0b">destroyTokensOlderThanMs</a> (<a class="el" href="namespace_louvre.html#a7e8aeec7b6541935dfc6f608cd5170ce">UInt32</a> ms)</td></tr>
<tr class="memdesc:a0bb0c19c59eaf96dcf3aab77231d0f0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy tokens older than the specified number of milliseconds.  <br /></td></tr>
<tr class="separator:a0bb0c19c59eaf96dcf3aab77231d0f0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_louvre_1_1_l_factory_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_louvre_1_1_l_factory_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_louvre_1_1_l_factory_object.html">LFactoryObject</a></td></tr>
<tr class="memitem:a3bd9479f72aa3d1df19e3a247adcf804 inherit pub_methods_class_louvre_1_1_l_factory_object" id="r_a3bd9479f72aa3d1df19e3a247adcf804"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_louvre_1_1_l_factory_object.html#ad96f0a085c6542bc6c83459a88bfb560">Type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_factory_object.html#a3bd9479f72aa3d1df19e3a247adcf804">factoryObjectType</a> () const noexcept</td></tr>
<tr class="memdesc:a3bd9479f72aa3d1df19e3a247adcf804 inherit pub_methods_class_louvre_1_1_l_factory_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the base factory object type.  <br /></td></tr>
<tr class="separator:a3bd9479f72aa3d1df19e3a247adcf804 inherit pub_methods_class_louvre_1_1_l_factory_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_louvre_1_1_l_object"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_louvre_1_1_l_object')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_louvre_1_1_l_object.html">LObject</a></td></tr>
<tr class="memitem:a5e0338a5b44c364d6b13da9a71ada022 inherit pub_methods_class_louvre_1_1_l_object" id="r_a5e0338a5b44c364d6b13da9a71ada022"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#a5e0338a5b44c364d6b13da9a71ada022">LObject</a> (const <a class="el" href="class_louvre_1_1_l_object.html">LObject</a> &amp;) noexcept</td></tr>
<tr class="memdesc:a5e0338a5b44c364d6b13da9a71ada022 inherit pub_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy constructor.  <br /></td></tr>
<tr class="separator:a5e0338a5b44c364d6b13da9a71ada022 inherit pub_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2d1ca3cf8daa14eec5716367c8f7cc5 inherit pub_methods_class_louvre_1_1_l_object" id="r_ab2d1ca3cf8daa14eec5716367c8f7cc5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_louvre_1_1_l_object.html">LObject</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#ab2d1ca3cf8daa14eec5716367c8f7cc5">operator=</a> (const <a class="el" href="class_louvre_1_1_l_object.html">LObject</a> &amp;) noexcept</td></tr>
<tr class="memdesc:ab2d1ca3cf8daa14eec5716367c8f7cc5 inherit pub_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assignment operator (each object has its own individual <a class="el" href="class_louvre_1_1_l_weak.html" title="Weak reference to an LObject.">LWeak</a> reference count).  <br /></td></tr>
<tr class="separator:ab2d1ca3cf8daa14eec5716367c8f7cc5 inherit pub_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaa9f556f19f069b6a81ff7ac7038962 inherit pub_methods_class_louvre_1_1_l_object" id="r_aaaa9f556f19f069b6a81ff7ac7038962"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#aaaa9f556f19f069b6a81ff7ac7038962">setUserData</a> (<a class="el" href="namespace_louvre.html#aae7f8c18b78885d886911ca3c22fac6a">UIntPtr</a> data) const noexcept</td></tr>
<tr class="memdesc:aaaa9f556f19f069b6a81ff7ac7038962 inherit pub_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an unsigned integer value/pointer.  <br /></td></tr>
<tr class="separator:aaaa9f556f19f069b6a81ff7ac7038962 inherit pub_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca4673ef20b24d63618e7d9061c66c6f inherit pub_methods_class_louvre_1_1_l_object" id="r_aca4673ef20b24d63618e7d9061c66c6f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_louvre.html#aae7f8c18b78885d886911ca3c22fac6a">UIntPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#aca4673ef20b24d63618e7d9061c66c6f">userData</a> () const noexcept</td></tr>
<tr class="memdesc:aca4673ef20b24d63618e7d9061c66c6f inherit pub_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the stored unsigned integer value/pointer.  <br /></td></tr>
<tr class="separator:aca4673ef20b24d63618e7d9061c66c6f inherit pub_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Virtual Methods</h2></td></tr>
<tr class="memitem:a7e64183ede84934ffa1e317f2d303eaf" id="r_a7e64183ede84934ffa1e317f2d303eaf"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf">createTokenRequest</a> ()</td></tr>
<tr class="memdesc:a7e64183ede84934ffa1e317f2d303eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to create an activation token.  <br /></td></tr>
<tr class="separator:a7e64183ede84934ffa1e317f2d303eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40cc53db3632faec17b5dd7eb79e213f" id="r_a40cc53db3632faec17b5dd7eb79e213f"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f">activateSurfaceRequest</a> (<a class="el" href="class_louvre_1_1_l_surface.html">LSurface</a> *surface)</td></tr>
<tr class="memdesc:a40cc53db3632faec17b5dd7eb79e213f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request to activate a surface.  <br /></td></tr>
<tr class="separator:a40cc53db3632faec17b5dd7eb79e213f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_class_louvre_1_1_l_factory_object"><td colspan="2" onclick="javascript:toggleInherit('pub_types_class_louvre_1_1_l_factory_object')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="class_louvre_1_1_l_factory_object.html">LFactoryObject</a></td></tr>
<tr class="memitem:ad96f0a085c6542bc6c83459a88bfb560 inherit pub_types_class_louvre_1_1_l_factory_object" id="r_ad96f0a085c6542bc6c83459a88bfb560"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_factory_object.html#ad96f0a085c6542bc6c83459a88bfb560">Type</a> : Int32 </td></tr>
<tr class="memdesc:ad96f0a085c6542bc6c83459a88bfb560"><td class="mdescLeft">&#160;</td><td class="mdescRight">Base factory object types.  <a href="class_louvre_1_1_l_factory_object.html#ad96f0a085c6542bc6c83459a88bfb560">More...</a><br /></td></tr>
<tr class="separator:ad96f0a085c6542bc6c83459a88bfb560 inherit pub_types_class_louvre_1_1_l_factory_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_class_louvre_1_1_l_object"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_class_louvre_1_1_l_object')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="class_louvre_1_1_l_object.html">LObject</a></td></tr>
<tr class="memitem:a923dd55b0ee0726e290f2b96fda86863 inherit pro_methods_class_louvre_1_1_l_object" id="r_a923dd55b0ee0726e290f2b96fda86863"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#a923dd55b0ee0726e290f2b96fda86863">LObject</a> () noexcept=default</td></tr>
<tr class="memdesc:a923dd55b0ee0726e290f2b96fda86863 inherit pro_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor of the <a class="el" href="class_louvre_1_1_l_object.html" title="Base class for Louvre objects.">LObject</a> class.  <br /></td></tr>
<tr class="separator:a923dd55b0ee0726e290f2b96fda86863 inherit pro_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82f01a547b3363a86304ad285774a3f inherit pro_methods_class_louvre_1_1_l_object" id="r_ab82f01a547b3363a86304ad285774a3f"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#ab82f01a547b3363a86304ad285774a3f">~LObject</a> () noexcept</td></tr>
<tr class="memdesc:ab82f01a547b3363a86304ad285774a3f inherit pro_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor of the <a class="el" href="class_louvre_1_1_l_object.html" title="Base class for Louvre objects.">LObject</a> class.  <br /></td></tr>
<tr class="separator:ab82f01a547b3363a86304ad285774a3f inherit pro_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af564f691ad42dec99924f2889175f323 inherit pro_methods_class_louvre_1_1_l_object" id="r_af564f691ad42dec99924f2889175f323"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_louvre_1_1_l_object.html#af564f691ad42dec99924f2889175f323">notifyDestruction</a> () noexcept</td></tr>
<tr class="memdesc:af564f691ad42dec99924f2889175f323 inherit pro_methods_class_louvre_1_1_l_object"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notifies the object destruction.  <br /></td></tr>
<tr class="separator:af564f691ad42dec99924f2889175f323 inherit pro_methods_class_louvre_1_1_l_object"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Activation Token Manager. </p>
<p><a class="anchor" id="lactivationtokenmanager_detailed"></a> The <a href="https://wayland.app/protocols/xdg-activation-v1">XDG Activation</a> protocol allows clients to pass focus to another client's surface.</p>
<p>The protocol functions as follows:</p>
<ol type="1">
<li>The "activator" client requests a new token from the compositor via the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf" title="Request to create an activation token.">createTokenRequest()</a> method. During the request, the client can provide additional (optional) information, such as the application ID of the "target" client (<a class="el" href="class_louvre_1_1_l_activation_token.html#ade2e8e8dd01f58f86504b3728ee2ad96" title="The app ID of the client to be activated.">LActivationToken::toActivateAppId()</a>), the event that triggered the request (<a class="el" href="class_louvre_1_1_l_activation_token.html#ad08cbb8b06f42f68b7dd5d1722cf2e7c" title="Triggering event.">LActivationToken::triggeringEvent()</a>), and the surface that received the triggering event (<a class="el" href="class_louvre_1_1_l_activation_token.html#aaaa0707e97612cc56bf1093c3e47b3c0" title="The surface of the client that created the token.">LActivationToken::origin()</a>).</li>
<li>If the request is accepted, the compositor generates an activation token (a unique and random string) and sends it to the client. The token is stored in the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#afc725cf49baea7e93f7abf73b62b0694" title="Retrieve available tokens.">tokens()</a> map.</li>
<li>The "activator" client then passes the token to the "target" client via its own communication channel (e.g., D-Bus, the <b>XDG_ACTIVATION_TOKEN</b> environment variable).</li>
<li>The "target" client can use the token to activate one of its surfaces by invoking the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a> method.</li>
</ol>
<p>The default implementations of <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf" title="Request to create an activation token.">createTokenRequest()</a> and <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a> only accept requests that provide a valid triggering event and destroy the token after it is used, as well as those that haven't been used in the last 10 seconds. This is for security reasons, tokens can remain valid indefinitely if desired.</p>
<p>There is a unique instance of this class, created within <a class="el" href="class_louvre_1_1_l_compositor.html#af3e8f08b72263581c87aa240607438ef" title="Request to create a specific LFactoryObject.">LCompositor::createObjectRequest()</a>, which can be accessed globally via <a class="el" href="namespace_louvre.html#a048b175bca7d8ae9d5ae2e92663f1dee" title="Provides access to the activation token manager.">Louvre::activationTokenManager()</a>.</p>
<p>To disable this protocol, remove its global from <a class="el" href="class_louvre_1_1_l_compositor.html#a1e03e3983ef2f3495537eb4ff0fc9996" title="Wayland globals initialization.">LCompositor::createGlobalsRequest()</a></p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_louvre_1_1_l_activation_token.html" title="Token for activating surfaces.">LActivationToken</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0672a06e173efe84390afb4db4c19330" name="a0672a06e173efe84390afb4db4c19330"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0672a06e173efe84390afb4db4c19330">&#9670;&#160;</a></span>LActivationTokenManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_louvre_1_1_l_activation_token_manager.html">LActivationTokenManager</a> </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_louvre_1_1_l_activation_token_manager.html" title="Activation Token Manager.">LActivationTokenManager</a> class constructor. </p>
<p>There is only one instance of this class, which can be accessed globally via <a class="el" href="namespace_louvre.html#a048b175bca7d8ae9d5ae2e92663f1dee" title="Provides access to the activation token manager.">activationTokenManager()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Internal parameters provided in <a class="el" href="class_louvre_1_1_l_compositor.html#af3e8f08b72263581c87aa240607438ef" title="Request to create a specific LFactoryObject.">LCompositor::createObjectRequest()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac398aa00f66d73778a15338ed7a95a13" name="ac398aa00f66d73778a15338ed7a95a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac398aa00f66d73778a15338ed7a95a13">&#9670;&#160;</a></span>~LActivationTokenManager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="class_louvre_1_1_l_activation_token_manager.html">LActivationTokenManager</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor of the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html" title="Activation Token Manager.">LActivationTokenManager</a> class. </p>
<p>Invoked after <a class="el" href="class_louvre_1_1_l_compositor.html#aa8850deab2bf40dc6cb9e276b22e39cb" title="Announce the anticipated destruction of an LFactoryObject.">LCompositor::onAnticipatedObjectDestruction()</a>. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afc725cf49baea7e93f7abf73b62b0694" name="afc725cf49baea7e93f7abf73b62b0694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc725cf49baea7e93f7abf73b62b0694">&#9670;&#160;</a></span>tokens()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; std::string, <a class="el" href="class_louvre_1_1_l_activation_token.html">LActivationToken</a> * &gt; &amp; tokens </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve available tokens. </p>
<p>Provides all currently available tokens, which clients can use to activate surfaces.</p>
<p>To expire tokens, use <a class="el" href="class_louvre_1_1_l_activation_token.html#aa074d496b64d920ce8bca4efa20dce9f" title="Invalidates and destroys the token.">LActivationToken::destroy()</a> or the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a0bb0c19c59eaf96dcf3aab77231d0f0b" title="Destroy tokens older than the specified number of milliseconds.">destroyTokensOlderThanMs()</a> method. </p>

</div>
</div>
<a id="a3cb010bd260fbefa7dc0268b3dea8245" name="a3cb010bd260fbefa7dc0268b3dea8245"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cb010bd260fbefa7dc0268b3dea8245">&#9670;&#160;</a></span>token()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_louvre_1_1_l_activation_token.html">LActivationToken</a> * token </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the current token. </p>
<p>This method provides access to the token used during <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf" title="Request to create an activation token.">createTokenRequest()</a> or <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a> requests. If neither request is in progress, this method returns <code>nullptr</code>.</p>
<p>The token is not provided as an argument to those requests because the default implementation of <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a> triggers <a class="el" href="class_louvre_1_1_l_toplevel_role.html#af15fbc4afa54f45c63ca60129bbebaf4" title="Request to activate.">LToplevelRole::activateRequest()</a> if the surface has a toplevel role. This way, the token can be accessed from <a class="el" href="class_louvre_1_1_l_toplevel_role.html#af15fbc4afa54f45c63ca60129bbebaf4" title="Request to activate.">LToplevelRole::activateRequest()</a> if needed. </p>

</div>
</div>
<a id="a0bb0c19c59eaf96dcf3aab77231d0f0b" name="a0bb0c19c59eaf96dcf3aab77231d0f0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb0c19c59eaf96dcf3aab77231d0f0b">&#9670;&#160;</a></span>destroyTokensOlderThanMs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroyTokensOlderThanMs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_louvre.html#a7e8aeec7b6541935dfc6f608cd5170ce">UInt32</a>&#160;</td>
          <td class="paramname"><em>ms</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy tokens older than the specified number of milliseconds. </p>
<p>The default implementation of <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a> uses this method to destroy all tokens older than 10 seconds to prevent unnecessary tokens from remaining active.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_louvre_1_1_l_activation_token.html#aa074d496b64d920ce8bca4efa20dce9f" title="Invalidates and destroys the token.">LActivationToken::destroy()</a> and <a class="el" href="class_louvre_1_1_l_activation_token.html#ae2ad24345daa0c51b5ae019f741f70bf" title="Time the token was created.">LActivationToken::created()</a>. </dd></dl>

</div>
</div>
<a id="a7e64183ede84934ffa1e317f2d303eaf" name="a7e64183ede84934ffa1e317f2d303eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e64183ede84934ffa1e317f2d303eaf">&#9670;&#160;</a></span>createTokenRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void createTokenRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request to create an activation token. </p>
<p>This request is triggered each time a client wants to create a new activation token. The activation token data can be accessed via <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245" title="Retrieve the current token.">token()</a>. If the token is denied, <code><a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245" title="Retrieve the current token.">token()</a>-&gt;destroy()</code> must be called, otherwise, the token will be retained in the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#afc725cf49baea7e93f7abf73b62b0694" title="Retrieve available tokens.">tokens()</a> map, and clients will be allowed to use it for <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f" title="Request to activate a surface.">activateSurfaceRequest()</a>.</p>
<p>The default implementation only accepts tokens generated by the currently focused client.</p>
<h4><a class="anchor" id="default-implementation"></a>
Default implementation</h4>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf">LActivationTokenManager::createTokenRequest</a>()</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Deny requests not originated from a recent user event</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">bool</span> allowed { <span class="keyword">false</span> };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;triggeringEvent())</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span> (<a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;triggeringEvent()-&gt;type())</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba61cf8510205077b6f5491d38cd44c0f7">LEvent::Type::Pointer</a>:</div>
<div class="line">            allowed = <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#a7c55a27018215e867553eabc8ea4e89f">pointer</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_pointer.html#a404f108b0244f597eb3c01853f449391">focus</a>() &amp;&amp; <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#a7c55a27018215e867553eabc8ea4e89f">pointer</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_pointer.html#a404f108b0244f597eb3c01853f449391">focus</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a030bc63c24e4bb205344939c91b2ba26">client</a>() == <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#ab0404b5122421d60843257a3886074f8">creator</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba6ce4d85a628a88bbdb3ac24a8e5a9c2e">LEvent::Type::Keyboard</a>:</div>
<div class="line">            allowed = <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_keyboard.html#a404f108b0244f597eb3c01853f449391">focus</a>() &amp;&amp; <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_keyboard.html#a404f108b0244f597eb3c01853f449391">focus</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a030bc63c24e4bb205344939c91b2ba26">client</a>() == <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#ab0404b5122421d60843257a3886074f8">creator</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdbaf0f31c9700c6b10d8a20dc487b2ae6a8">LEvent::Type::Touch</a>:</div>
<div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;touchPoints { <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#aab4e1fb76cc73fc24a53bd73a7b17dae">touch</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_touch.html#a48f0263b68045441864293f39f163154">touchPoints</a>() };</div>
<div class="line">            allowed = std::any_of(touchPoints.begin(), touchPoints.end(), [<span class="keyword">this</span>](LTouchPoint *tp) { return tp-&gt;surface() &amp;&amp; tp-&gt;surface()-&gt;client() == token()-&gt;creator();});</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!allowed)</div>
<div class="line">        <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#aa074d496b64d920ce8bca4efa20dce9f">destroy</a>();</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a0bb0c19c59eaf96dcf3aab77231d0f0b">destroyTokensOlderThanMs</a>(10000);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_html_aa074d496b64d920ce8bca4efa20dce9f"><div class="ttname"><a href="class_louvre_1_1_l_activation_token.html#aa074d496b64d920ce8bca4efa20dce9f">Louvre::LActivationToken::destroy</a></div><div class="ttdeci">const std::unordered_map&lt; std::string, LActivationToken * &gt;::iterator destroy() const noexcept</div><div class="ttdoc">Invalidates and destroys the token.</div><div class="ttdef"><b>Definition</b> LActivationToken.cpp:8</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_html_ab0404b5122421d60843257a3886074f8"><div class="ttname"><a href="class_louvre_1_1_l_activation_token.html#ab0404b5122421d60843257a3886074f8">Louvre::LActivationToken::creator</a></div><div class="ttdeci">LClient * creator() const noexcept</div><div class="ttdoc">The client that requested the token creation.</div><div class="ttdef"><b>Definition</b> LActivationToken.h:31</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_manager_html_a0bb0c19c59eaf96dcf3aab77231d0f0b"><div class="ttname"><a href="class_louvre_1_1_l_activation_token_manager.html#a0bb0c19c59eaf96dcf3aab77231d0f0b">Louvre::LActivationTokenManager::destroyTokensOlderThanMs</a></div><div class="ttdeci">void destroyTokensOlderThanMs(UInt32 ms)</div><div class="ttdoc">Destroy tokens older than the specified number of milliseconds.</div><div class="ttdef"><b>Definition</b> LActivationTokenManager.cpp:22</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_manager_html_a3cb010bd260fbefa7dc0268b3dea8245"><div class="ttname"><a href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">Louvre::LActivationTokenManager::token</a></div><div class="ttdeci">LActivationToken * token() const noexcept</div><div class="ttdoc">Retrieve the current token.</div><div class="ttdef"><b>Definition</b> LActivationTokenManager.h:84</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_manager_html_a7e64183ede84934ffa1e317f2d303eaf"><div class="ttname"><a href="class_louvre_1_1_l_activation_token_manager.html#a7e64183ede84934ffa1e317f2d303eaf">Louvre::LActivationTokenManager::createTokenRequest</a></div><div class="ttdeci">virtual void createTokenRequest()</div><div class="ttdoc">Request to create an activation token.</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_event_html_a69c3035848adb078e48c717f809e9fdba61cf8510205077b6f5491d38cd44c0f7"><div class="ttname"><a href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba61cf8510205077b6f5491d38cd44c0f7">Louvre::LEvent::Type::Pointer</a></div><div class="ttdeci">@ Pointer</div><div class="ttdoc">Pointer event type.</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_event_html_a69c3035848adb078e48c717f809e9fdba6ce4d85a628a88bbdb3ac24a8e5a9c2e"><div class="ttname"><a href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba6ce4d85a628a88bbdb3ac24a8e5a9c2e">Louvre::LEvent::Type::Keyboard</a></div><div class="ttdeci">@ Keyboard</div><div class="ttdoc">Keyboard event type.</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_event_html_a69c3035848adb078e48c717f809e9fdbaf0f31c9700c6b10d8a20dc487b2ae6a8"><div class="ttname"><a href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdbaf0f31c9700c6b10d8a20dc487b2ae6a8">Louvre::LEvent::Type::Touch</a></div><div class="ttdeci">@ Touch</div><div class="ttdoc">Touch event type.</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_keyboard_html_a404f108b0244f597eb3c01853f449391"><div class="ttname"><a href="class_louvre_1_1_l_keyboard.html#a404f108b0244f597eb3c01853f449391">Louvre::LKeyboard::focus</a></div><div class="ttdeci">LSurface * focus() const noexcept</div><div class="ttdoc">Focused surface.</div><div class="ttdef"><b>Definition</b> LKeyboard.cpp:271</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_pointer_html_a404f108b0244f597eb3c01853f449391"><div class="ttname"><a href="class_louvre_1_1_l_pointer.html#a404f108b0244f597eb3c01853f449391">Louvre::LPointer::focus</a></div><div class="ttdeci">LSurface * focus() const noexcept</div><div class="ttdoc">Gets the focused surface.</div><div class="ttdef"><b>Definition</b> LPointer.cpp:413</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_seat_html_a7c55a27018215e867553eabc8ea4e89f"><div class="ttname"><a href="class_louvre_1_1_l_seat.html#a7c55a27018215e867553eabc8ea4e89f">Louvre::LSeat::pointer</a></div><div class="ttdeci">LPointer * pointer() const noexcept</div><div class="ttdoc">Access to pointer events.</div><div class="ttdef"><b>Definition</b> LSeat.h:169</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_seat_html_aab4e1fb76cc73fc24a53bd73a7b17dae"><div class="ttname"><a href="class_louvre_1_1_l_seat.html#aab4e1fb76cc73fc24a53bd73a7b17dae">Louvre::LSeat::touch</a></div><div class="ttdeci">LTouch * touch() const noexcept</div><div class="ttdoc">Access to touch events.</div><div class="ttdef"><b>Definition</b> LSeat.h:189</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_seat_html_ac4ab7f9428e61a97051fce844a98cc21"><div class="ttname"><a href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">Louvre::LSeat::keyboard</a></div><div class="ttdeci">LKeyboard * keyboard() const noexcept</div><div class="ttdoc">Access to keyboard events.</div><div class="ttdef"><b>Definition</b> LSeat.h:179</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_surface_html_a030bc63c24e4bb205344939c91b2ba26"><div class="ttname"><a href="class_louvre_1_1_l_surface.html#a030bc63c24e4bb205344939c91b2ba26">Louvre::LSurface::client</a></div><div class="ttdeci">LClient * client() const noexcept</div><div class="ttdoc">Client owner of the surface.</div><div class="ttdef"><b>Definition</b> LSurface.cpp:491</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_touch_html_a48f0263b68045441864293f39f163154"><div class="ttname"><a href="class_louvre_1_1_l_touch.html#a48f0263b68045441864293f39f163154">Louvre::LTouch::touchPoints</a></div><div class="ttdeci">const std::vector&lt; LTouchPoint * &gt; &amp; touchPoints() const noexcept</div><div class="ttdoc">Vector of currently active touchpoints.</div><div class="ttdef"><b>Definition</b> LTouch.cpp:34</div></div>
<div class="ttc" id="anamespace_louvre_html_acee23df69aa55d791385fb9813b0319a"><div class="ttname"><a href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">Louvre::seat</a></div><div class="ttdeci">LSeat * seat() noexcept</div><div class="ttdoc">Gets the compositor's seat.</div><div class="ttdef"><b>Definition</b> LCompositor.cpp:42</div></div>
</div><!-- fragment --> 
</div>
</div>
<a id="a40cc53db3632faec17b5dd7eb79e213f" name="a40cc53db3632faec17b5dd7eb79e213f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40cc53db3632faec17b5dd7eb79e213f">&#9670;&#160;</a></span>activateSurfaceRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void activateSurfaceRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_louvre_1_1_l_surface.html">LSurface</a> *&#160;</td>
          <td class="paramname"><em>surface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Request to activate a surface. </p>
<p>This request indicates that a client wants to activate one of its surfaces and is only triggered if the client provides one of the <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#afc725cf49baea7e93f7abf73b62b0694" title="Retrieve available tokens.">tokens()</a>, which can be accessed during the request with <a class="el" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245" title="Retrieve the current token.">token()</a>.</p>
<p>The default implementation verifies if the token is recent and destroys it immediately after use, along with any tokens older than 10 seconds.</p>
<p>If the token is not destroyed, <a class="el" href="class_louvre_1_1_l_activation_token.html#ad27b8071024ebbebd702b84c76c63ffb" title="Number of times the token has been used to activate a surface.">LActivationToken::timesUsed()</a> is incremented by 1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">surface</td><td>The surface to activate.</td></tr>
  </table>
  </dd>
</dl>
<h4><a class="anchor" id="default-implementation-1"></a>
Default implementation</h4>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f">LActivationTokenManager::activateSurfaceRequest</a>(<a class="code hl_class" href="class_louvre_1_1_l_surface.html">LSurface</a> *surface)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> allowed { <span class="keyword">false</span> };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;creator() &amp;&amp; <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;triggeringEvent() &amp;&amp; <a class="code hl_function" href="namespace_louvre.html#aae2b1cd84497a1980827ff545147c58c">sessionLockManager</a>()-&gt;state() == <a class="code hl_enumvalue" href="class_louvre_1_1_l_session_lock_manager.html#a5d74787dedbc4e11c1ab15bf487e61f8a7a581195d038372012532c1e5c284f29">LSessionLockManager::Unlocked</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">switch</span> (<a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;triggeringEvent()-&gt;type())</div>
<div class="line">        {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba61cf8510205077b6f5491d38cd44c0f7">LEvent::Type::Pointer</a>:</div>
<div class="line">            allowed = <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#a7c55a27018215e867553eabc8ea4e89f">pointer</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_pointer.html#a404f108b0244f597eb3c01853f449391">focus</a>() &amp;&amp; <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#a7c55a27018215e867553eabc8ea4e89f">pointer</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_pointer.html#a404f108b0244f597eb3c01853f449391">focus</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a030bc63c24e4bb205344939c91b2ba26">client</a>() == <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#ab0404b5122421d60843257a3886074f8">creator</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdba6ce4d85a628a88bbdb3ac24a8e5a9c2e">LEvent::Type::Keyboard</a>:</div>
<div class="line">            allowed = <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_keyboard.html#a404f108b0244f597eb3c01853f449391">focus</a>() &amp;&amp; <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_keyboard.html#a404f108b0244f597eb3c01853f449391">focus</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a030bc63c24e4bb205344939c91b2ba26">client</a>() == <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#ab0404b5122421d60843257a3886074f8">creator</a>();</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="class_louvre_1_1_l_event.html#a69c3035848adb078e48c717f809e9fdbaf0f31c9700c6b10d8a20dc487b2ae6a8">LEvent::Type::Touch</a>:</div>
<div class="line">            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;touchPoints { <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#aab4e1fb76cc73fc24a53bd73a7b17dae">touch</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_touch.html#a48f0263b68045441864293f39f163154">touchPoints</a>() };</div>
<div class="line">            allowed = std::any_of(touchPoints.begin(), touchPoints.end(), [<span class="keyword">this</span>](LTouchPoint *tp) { return tp-&gt;surface() &amp;&amp; tp-&gt;surface()-&gt;client() == token()-&gt;creator();});</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (allowed)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (surface-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a744809727c631248ae26aae91fa08a6d">toplevel</a>())</div>
<div class="line">            surface-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#a744809727c631248ae26aae91fa08a6d">toplevel</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_toplevel_role.html#af15fbc4afa54f45c63ca60129bbebaf4">activateRequest</a>();</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <a class="code hl_function" href="namespace_louvre.html#acee23df69aa55d791385fb9813b0319a">seat</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_seat.html#ac4ab7f9428e61a97051fce844a98cc21">keyboard</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_keyboard.html#ab600af38a7a8579ddcaf35c4b2efee49">setFocus</a>(surface);</div>
<div class="line">            surface-&gt;<a class="code hl_function" href="class_louvre_1_1_l_surface.html#ad9c27f2d106edb222bc33c4bfc384f58">raise</a>();</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a3cb010bd260fbefa7dc0268b3dea8245">token</a>()-&gt;<a class="code hl_function" href="class_louvre_1_1_l_activation_token.html#aa074d496b64d920ce8bca4efa20dce9f">destroy</a>();</div>
<div class="line">    <a class="code hl_function" href="class_louvre_1_1_l_activation_token_manager.html#a0bb0c19c59eaf96dcf3aab77231d0f0b">destroyTokensOlderThanMs</a>(10000);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_louvre_1_1_l_activation_token_manager_html_a40cc53db3632faec17b5dd7eb79e213f"><div class="ttname"><a href="class_louvre_1_1_l_activation_token_manager.html#a40cc53db3632faec17b5dd7eb79e213f">Louvre::LActivationTokenManager::activateSurfaceRequest</a></div><div class="ttdeci">virtual void activateSurfaceRequest(LSurface *surface)</div><div class="ttdoc">Request to activate a surface.</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_keyboard_html_ab600af38a7a8579ddcaf35c4b2efee49"><div class="ttname"><a href="class_louvre_1_1_l_keyboard.html#ab600af38a7a8579ddcaf35c4b2efee49">Louvre::LKeyboard::setFocus</a></div><div class="ttdeci">void setFocus(LSurface *surface)</div><div class="ttdoc">Set keyboard focus.</div><div class="ttdef"><b>Definition</b> LKeyboard.cpp:276</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_session_lock_manager_html_a5d74787dedbc4e11c1ab15bf487e61f8a7a581195d038372012532c1e5c284f29"><div class="ttname"><a href="class_louvre_1_1_l_session_lock_manager.html#a5d74787dedbc4e11c1ab15bf487e61f8a7a581195d038372012532c1e5c284f29">Louvre::LSessionLockManager::Unlocked</a></div><div class="ttdeci">@ Unlocked</div><div class="ttdef"><b>Definition</b> LSessionLockManager.h:27</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_surface_html"><div class="ttname"><a href="class_louvre_1_1_l_surface.html">Louvre::LSurface</a></div><div class="ttdoc">A client &quot;window&quot;.</div><div class="ttdef"><b>Definition</b> LSurface.h:109</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_surface_html_a744809727c631248ae26aae91fa08a6d"><div class="ttname"><a href="class_louvre_1_1_l_surface.html#a744809727c631248ae26aae91fa08a6d">Louvre::LSurface::toplevel</a></div><div class="ttdeci">LToplevelRole * toplevel() const noexcept</div><div class="ttdoc">Toplevel role.</div><div class="ttdef"><b>Definition</b> LSurface.cpp:70</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_surface_html_ad9c27f2d106edb222bc33c4bfc384f58"><div class="ttname"><a href="class_louvre_1_1_l_surface.html#ad9c27f2d106edb222bc33c4bfc384f58">Louvre::LSurface::raise</a></div><div class="ttdeci">void raise()</div><div class="ttdoc">Raises the surface within its current layer.</div><div class="ttdef"><b>Definition</b> LSurface.cpp:575</div></div>
<div class="ttc" id="aclass_louvre_1_1_l_toplevel_role_html_af15fbc4afa54f45c63ca60129bbebaf4"><div class="ttname"><a href="class_louvre_1_1_l_toplevel_role.html#af15fbc4afa54f45c63ca60129bbebaf4">Louvre::LToplevelRole::activateRequest</a></div><div class="ttdeci">virtual void activateRequest()</div><div class="ttdoc">Request to activate.</div></div>
<div class="ttc" id="anamespace_louvre_html_aae2b1cd84497a1980827ff545147c58c"><div class="ttname"><a href="namespace_louvre.html#aae2b1cd84497a1980827ff545147c58c">Louvre::sessionLockManager</a></div><div class="ttdeci">LSessionLockManager * sessionLockManager() noexcept</div><div class="ttdoc">Gets the compositor's session lock manager.</div><div class="ttdef"><b>Definition</b> LCompositor.cpp:52</div></div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
<script>
    var menu = false;
    var burger, nav;
    function resp()
    {
        if (window.innerWidth < 768)
        {
            burger.hidden = false;
            nav.hidden = true;
        }
        else
        {
            burger.hidden = true;
            nav.hidden = false;
        }
        menu = false;
    }
    function toggleMenu()
    {
        nav.hidden = menu;
        menu = !menu;
    }
    window.onload = function()
    {
        if (typeof toggleLevel !== "undefined")
            toggleLevel(2);
        // Get all <a> tags with the "el" class
        var elLinks = document.querySelectorAll('a.el');
        // Loop through the matched elements
        elLinks.forEach(function(link) 
        {
            // Replace "Louvre::" with an empty string in the text content
            link.textContent = link.textContent.replace(/Louvre::/g, '');
        });
        nav = document.getElementById('main-nav');
        burger = document.createElement('div');
        burger.style.position = 'absolute';
        burger.style.top = '14px';
        burger.style.right = burger.style.top;
        burger.innerHTML = '<svg onclick="toggleMenu()" height="32px" viewBox="0 0 448 512"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg>';
        document.getElementById('top').appendChild(burger);
        resp();
    };
    window.onresize = function()
    {
        resp();
    };
</script>
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">Project developed by <a href="https://github.com/CuarzoSoftware"><img class="footer" src="https://avatars.githubusercontent.com/u/29326763?s=200&v=4" style="margin-left:2px;position:relative;top:-1px;width:12px;height:12px" alt="cuarzo"/> Cuarzo Software</a></li>
    </ul>
</div>