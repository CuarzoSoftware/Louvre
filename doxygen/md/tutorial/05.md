# Chapter 5: Factory

To change the default behavior of the compositor, you can override the virtual methods of the many classes that make up the library.\n
Each class is responsible for a specific group of functionality, such as handling input events, specific client requests, rendering, and so on.\n
The Louvre::LCompositor class is considered the resources factory of the library as it is responsible for generating and destroying instances of those classes. It has a list of virtual constructors and destructors, which can be overwritten to use variants defined by the developer themselves, and be notified when they will be destroyed in advance. 

> The list of virtual methods, its purposes, and their default implementations can be found in the [API documentation](annotated.html) of each class.


# Reimplementing LCompositor

Let's reimplement the Louvre::LCompositor class to override its virtual methods.\n
Right-click on the sources directory in QtCreator and select the **Add New...** option.

![](https://lh3.googleusercontent.com/h87ylTFc-lG_LE7xVbtesiu9ZXkLeTnMCOh86GlNkZxg6V-hnZqgdUzdyTDETmYx6HGMl_ubPFjk6_nUkcec61nzGjljiX4lxcFfolyOSBT5fHdw4rmTbzdTi8ilRA5zB7u7d8ccDQ=w2400)

Then, in the **C/C++** category, select the **C++ Class** option.

![](https://lh3.googleusercontent.com/_RhH8lHCvzK6XdEwtL8TBFA1ltQwt7vzkKneznAASYEoX4g_ZHVMqnyqV13f-7vYYGICrtWrftZUJZP320cZ1XO_FWMSBxpC69dHH4pwmDTT59ccBj0T7TB1XEZKCiCtu3tNbFkQuA=w2400)

Name the class **MyCompositor** and set the **Base class** field to **LCompositor**.

![](https://lh3.googleusercontent.com/8ioZD9LnkO2AqwsNJFoMTO5X7G9r87nSAHoaff7qKHPXTSw4HXpdg1xkcGdM-JX_OTK61ShXeHZtdiyrgWkPck7NKii68DKvLzfeeuwSDs5PPB01L-e69i-xC_RQksMvx5Rzid9x5w=w2400)

> Notice that Qt Creator automatically turns the file names to lowercase, so you must manually capitalize them.

Finally, click **Next** and **Finish**.\n
Two new files should appear: **MyCompositor.h** and **MyCompositor.cpp**.\n
Double-click **MyCompositor.h**, modify the header and add the Louvre namespace.

<pre class="cpp-code"><span class="add">#ifndef MYCOMPOSITOR_H
#define MYCOMPOSITOR_H

#include <LCompositor.h>

using namespace Louvre;

class MyCompositor : public LCompositor
{
public:
    MyCompositor();
};

#endif // MYCOMPOSITOR_H</span></pre>

Now replace **LCompositor** with **MyCompositor** in the **main.cpp** file.

<pre class="cpp-code"><span class="add">#include <MyCompositor.h></span>

int main()
{
    <span class="add">MyCompositor compositor;</span>
    return compositor.start();
}</pre>

If you compile and run the compositor, you will notice that nothing has changed. This is because we have not yet overridden any of its virtual methods.

# LCompositor Initialization

Let's override the virtual method Louvre::LCompositor::initialized() which is invoked to notify a successful compositor initialization after Louvre::LCompositor::start() is called.\n

Go to **MyCompositor.h** and override the method:

<pre class="cpp-code">
#ifndef MYCOMPOSITOR_H
#define MYCOMPOSITOR_H

#include <LCompositor.h>

using namespace Louvre;

class MyCompositor : public LCompositor
{
public:
    MyCompositor();
    
    <span class="add">void initialized() override;</span>
};

#endif // MYCOMPOSITOR_H
</pre>

Now, right-click on the definition of **initialized()** and then select **Refactor > Add definition in MyCompositor.cpp**.

![](https://lh3.googleusercontent.com/jtOFGwO-Zbumv-SiMZX5TadxP0gfmIDK3-_j2dgOK_P8IBbzyIdsTWkUWZAahEljpehWeDCZvLa2kx6bJYE8UAuOiWSW5Xtwgcm7LXdxlsEabjY7P9GddBfGjIBZoaG_u-9ejPdysw=w2400)

You can see that this adds the method definition in **MyCompositor.cpp**.

<pre class="cpp-code">
#include "MyCompositor.h"

MyCompositor::MyCompositor()
{

}

<span class="add">void MyCompositor::initialized()
{

}</span>
</pre>

We have just overridden the default implementation Louvre::LCompositor::initialized(). If you compile and run the compositor, you will notice that its content is no longer displayed on the screen.

We will see the reason for this in the next chapter.

